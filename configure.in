AC_PREREQ(2.50)
AC_INIT(exif/main.c)
AM_CONFIG_HEADER(config.h)
AM_INIT_AUTOMAKE(exif,0.5)
AM_MAINTAINER_MODE

AM_PROG_LIBTOOL

dnl ---------------------------------------------------------------------------
dnl i18n support
dnl ---------------------------------------------------------------------------
ALL_LINGUAS="de es"
AM_GNU_GETTEXT

dnl ---------------------------------------------------------------------------
dnl libraries needed
dnl ---------------------------------------------------------------------------
PKG_CHECK_MODULES(LIBEXIF, libexif >= 0.5.4)
AC_SUBST(LIBEXIF_LIBS)
AC_SUBST(LIBEXIF_CFLAGS)

dnl ---------------------------------------------------------------------------
dnl locale.h: locale.h provides setlocale. It seems that some systems don't
dnl           have it (at least if configured --without-nls).
dnl ---------------------------------------------------------------------------
AC_CHECK_HEADERS(locale.h)

dnl ---------------------------------------------------------------------------
dnl Warnings: If we have GCC, be paranoid.
dnl ---------------------------------------------------------------------------
if test "x$GCC" = "xyes"; then
    CFLAGS="$CFLAGS -Wall -Wchar-subscripts -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wpointer-arith -Werror"
    AC_SUBST(CFLAGS)
fi

AC_OUTPUT([
  Makefile
  libjpeg/Makefile
  exif/Makefile
])

echo "

Configuration:

	Source code location:      ${srcdir}
	Compiler:                  ${CC}
"
